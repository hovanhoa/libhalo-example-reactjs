{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PromisedMap = void 0;\nvar PromisedMap = /** @class */function () {\n  function PromisedMap() {\n    this.map = new Map();\n  }\n  Object.defineProperty(PromisedMap.prototype, \"size\", {\n    /**\n     * Returns map size.\n     */\n    get: function () {\n      return this.map.size;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Sets key/data pair and creates related promise.\n   * If key already exists in map - it will be replaced with new data and new promise.\n   */\n  PromisedMap.prototype.set = function (key, data) {\n    var item = this.createMapItem(data);\n    this.map.set(key, item);\n    return item.promise;\n  };\n  /**\n   * Returns data for key.\n   */\n  PromisedMap.prototype.get = function (key) {\n    var item = this.map.get(key);\n    return item && item.data;\n  };\n  /**\n   * Checks if key exists.\n   */\n  PromisedMap.prototype.has = function (key) {\n    return this.map.has(key);\n  };\n  /**\n   * Deletes key from map.\n   * Caution: previously returned promise will no be resolved or rejected.\n   */\n  PromisedMap.prototype.delete = function (key) {\n    return this.map.delete(key);\n  };\n  /**\n   * Resolves promise in map by key and removes key from map.\n   * If no such key in map - nothing happens.\n   */\n  PromisedMap.prototype.resolve = function (key, value) {\n    var item = this.map.get(key);\n    if (item) {\n      this.delete(key);\n      item.resolve(value);\n    }\n  };\n  /**\n   * Rejects promise in map by key and removes key from map.\n   * If no such key in map - nothing happens.\n   */\n  PromisedMap.prototype.reject = function (key, reason) {\n    var item = this.map.get(key);\n    if (item) {\n      this.delete(key);\n      item.reject(reason);\n    }\n  };\n  /**\n   * Resolves all promise in map and removes all keys.\n   */\n  PromisedMap.prototype.resolveAll = function (value) {\n    this.map.forEach(function (item) {\n      return item.resolve(value);\n    });\n    this.map.clear();\n  };\n  /**\n   * Rejects all promise in map and removes all keys.\n   */\n  PromisedMap.prototype.rejectAll = function (reason) {\n    this.map.forEach(function (item) {\n      return item.reject(reason);\n    });\n    this.map.clear();\n  };\n  /**\n   * Iterate map.\n   */\n  PromisedMap.prototype.forEach = function (fn) {\n    this.map.forEach(function (item, key, map) {\n      return fn(item.data, key, map);\n    });\n  };\n  /**\n   * Clears map.\n   */\n  PromisedMap.prototype.clear = function () {\n    return this.map.clear();\n  };\n  PromisedMap.prototype.createMapItem = function (data) {\n    var item = {\n      data: data\n    };\n    item.promise = new Promise(function (resolve, reject) {\n      item.resolve = resolve;\n      item.reject = reject;\n    });\n    return item;\n  };\n  return PromisedMap;\n}();\nexports.PromisedMap = PromisedMap;","map":{"version":3,"names":["PromisedMap","map","Map","Object","defineProperty","prototype","get","size","set","key","data","item","createMapItem","promise","has","delete","resolve","value","reject","reason","resolveAll","forEach","clear","rejectAll","fn","Promise","exports"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}